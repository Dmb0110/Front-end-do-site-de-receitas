<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalhes da Receita</title>
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #fffaf4;
      color: #333;
      overflow-x: hidden;
    }

    body {
      padding: 30px;
      max-width: 800px;
      margin: auto;
    }

    h2 {
      color: #ff7043;
      margin-bottom: 20px;
      font-size: 28px;
      text-align: center;
    }

    h3 {
      font-size: 20px;
      margin-top: 30px;
    }

    ul {
      padding-left: 20px;
      margin-bottom: 30px;
    }

    li {
      margin-bottom: 8px;
      font-size: 16px;
    }

    .modo-preparo {
      background-color: #fff3e0;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      font-size: 16px;
      line-height: 1.6;
    }

    a {
      display: inline-block;
      margin-bottom: 20px;
      color: #ff7043;
      text-decoration: none;
      font-size: 16px;
    }

    a:hover {
      text-decoration: underline;
    }

    @media (max-width: 600px) {
      body {
        padding: 20px 15px;
      }

      h2 {
        font-size: 22px;
      }

      h3 {
        font-size: 18px;
      }

      li, .modo-preparo, a {
        font-size: 15px;
      }
    }

    @media (min-width: 1200px) {
      body {
        max-width: 1000px;
        font-size: 18px;
      }
    }
  </style>
</head>
<body>

  <a href="javascript:history.back()">← Voltar</a>
  <h2 id="titulo-receita">Receita</h2>
  <h3>Ingredientes</h3>
  <ul id="lista-ingredientes"></ul>
  <h3>Modo de Preparo</h3>
  <div class="modo-preparo" id="modo-preparo"></div>

  <script>
  const API_BASE = "https://beck-end-do-site-de-receitas.vercel.app";

  function getIdFromURL() {
    const params = new URLSearchParams(window.location.search);
    return params.get("id");
  }

  async function buscarReceitaPorId(receita_id) {
    const res = await fetch(`${API_BASE}/receita/especifico/${receita_id}`);
    if (!res.ok) throw new Error("Erro ao buscar receita");
    return await res.json();
  }

  async function carregarDetalhes() {
    const id = getIdFromURL();
    if (!id) {
      document.getElementById("titulo-receita").textContent = "Receita não encontrada";
      return;
    }

    try {
      const receita = await buscarReceitaPorId(id);

      document.getElementById("titulo-receita").textContent = receita.nome_da_receita;

      // Ingredientes (aceita vírgula ou quebra de linha)
      const ingredientes = receita.ingredientes
        .split(/\r?\n|,/)
        .map(i => i.trim())
        .filter(i => i !== "");
      const lista = document.getElementById("lista-ingredientes");
      lista.innerHTML = "";
      ingredientes.forEach(item => {
        const li = document.createElement("li");
        li.textContent = item;
        lista.appendChild(li);
      });

      // Modo de preparo formatado
      const modoFormatado = receita.modo_de_preparo
        .split(".")
        .map(frase => frase.trim())
        .filter(frase => frase !== "")
        .map(frase => frase + ".")
        .join("<br>");

      document.getElementById("modo-preparo").innerHTML = modoFormatado;
    } catch (err) {
      document.getElementById("titulo-receita").textContent = "Erro ao carregar receita";
      console.error(err);
    }
  }

  carregarDetalhes();

  </script>

</body>
</html>
