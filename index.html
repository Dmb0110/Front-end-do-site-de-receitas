<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Receitas</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fffaf4;
      margin: 0;
      padding: 0;
    }

    .receitas-container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      text-align: center;
    }

    h2 {
      font-size: 28px;
      margin-bottom: 20px;
    }

    .titulo-receita {
      font-weight: bold;
      font-size: 20px;
      margin: 20px 0 10px;
      cursor: pointer;
      color: #ff7043;
    }

    .titulo-receita:hover {
      text-decoration: underline;
    }

    .receita-foto {
      max-width: 60%;
      border-radius: 8px;
      margin-bottom: 30px;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    #detalhes-receita {
      margin-top: 40px;
      text-align: left;
      background: #fff3e0;
      padding: 20px;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <div class="receitas-container">
    <h2>ðŸ“š Lista de Receitas</h2>
    <div id="lista-receitas"></div>

    <!-- Ãrea para detalhes -->
    <div id="detalhes-receita"></div>
  </div>

  <script>
    const API_BASE = "https://beck-end-do-site-de-receitas-vslw.vercel.app";

    // FunÃ§Ã£o para buscar todas as receitas
    async function buscarReceitas() {
      const res = await fetch(`${API_BASE}/receita/receber`);
      if (!res.ok) throw new Error("Erro ao buscar receitas");
      return await res.json();
    }

    // FunÃ§Ã£o para carregar receitas na lista
    async function carregarReceitas() {
      const container = document.getElementById("lista-receitas");
      container.innerHTML = "";
      const receitas = await buscarReceitas();

      receitas.forEach(r => {
        const div = document.createElement("div");
        div.innerHTML = `
          <div class="titulo-receita" onclick="mostrarDetalhes(${r.id})">
            ${r.nome_da_receita}
          </div>
          ${r.imagem_url ? `<img class="receita-foto" src="${r.imagem_url}" alt="${r.nome_da_receita}" />` : ""}
        `;
        container.appendChild(div);
      });
    }

    // FunÃ§Ã£o para mostrar detalhes da receita clicada
    async function mostrarDetalhes(id) {
      try {
        const res = await fetch(`${API_BASE}/receita/especifico/${id}`);
        if (!res.ok) throw new Error("Erro ao buscar receita");
        const receita = await res.json();

        document.getElementById("detalhes-receita").innerHTML = `
          <h2>${receita.nome_da_receita}</h2>
          <img src="${receita.imagem_url}" alt="${receita.nome_da_receita}" class="receita-foto" />
          <h3>Ingredientes</h3>
          <ul>${receita.ingredientes.split("\n").map(i => `<li>${i}</li>`).join("")}</ul>
          <h3>Modo de Preparo</h3>
          <p>${receita.modo_de_preparo}</p>
        `;
      } catch (err) {
        console.error(err);
        alert("Erro ao carregar detalhes da receita");
      }
    }

    // Chamada inicial para carregar lista
    carregarReceitas();
  </script>

</body>
</html>

